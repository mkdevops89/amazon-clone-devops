# Optional: Deploying with AWS Elastic Beanstalk (The "Easy Mode" Cloud)

While this project focuses on Kubernetes (EKS), you can also deploy it using AWS Elastic Beanstalk for a simpler, PaaS-like experience.

## 1. Prerequisites
*   AWS CLI (`aws configure`)
*   EB CLI (`pip install awsebcli`)

## 2. Strategy: Multi-Container Docker
Since we have multiple services (Frontend, Backend, Nginx), we will use the "Multi-Container Docker" platform type in Elastic Beanstalk.
This requires a `Dockerrun.aws.json` file (which is AWS's version of docker-compose).

## 3. Create `Dockerrun.aws.json`
Create this file in the root of your project:

```json
{
  "AWSEBDockerrunVersion": 2,
  "containerDefinitions": [
    {
      "name": "backend",
      "image": "your-docker-hub-user/amazon-backend:latest",
      "essential": true,
      "memory": 512,
      "portMappings": [
        {
          "hostPort": 8080,
          "containerPort": 8080
        }
      ],
      "environment": [
        {
          "name": "SPRING_PROFILES_ACTIVE",
          "value": "prod"
        }
      ]
    },
    {
      "name": "frontend",
      "image": "your-docker-hub-user/amazon-frontend:latest",
      "essential": true,
      "memory": 256,
      "portMappings": [
        {
          "hostPort": 80,
          "containerPort": 3000
        }
      ],
      "links": [
        "backend"
      ]
    }
  ]
}
```

## 4. Deployment Steps

### Step A: Initialize
Run this in your project root:
```bash
eb init -p "Docker" amazon-clone-app --region us-east-1
```

### Step B: Create Environment
This spins up the EC2 instances, Load Balancer, and Security Groups automatically.
```bash
eb create amazon-clone-prod
```

### Step C: Deploy Updates
Whenever you change your code (and push new images to Docker Hub):
```bash
eb deploy
```

## 5. Connecting Database (RDS)
Elastic Beanstalk can provision an RDS database for you, OR you can connect to an external one.
**Best Practice**: Provision RDS separately (via Terraform) and pass the connection string as environment variables:

```bash
eb setenv SPRING_DATASOURCE_URL=jdbc:mysql://my-rds-endpoint:3306/db
eb setenv SPRING_DATASOURCE_USERNAME=admin
eb setenv SPRING_DATASOURCE_PASSWORD=secret
```
